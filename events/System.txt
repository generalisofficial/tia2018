add_namespace = system

country_event = {
	id = system.1
	hidden=yes

	is_triggered_only = yes
	
	immediate = {
		set_parliament_graphics = yes
		if = {
			limit = {
				minority_government = yes
			}
			add_ideas = minority_government
		}
	}
}

country_event = {
	id = system.2
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = benelux_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = benelux_dissolved
	}
}

country_event = {
	id = system.4
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = arab_league_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = arab_league_dissolved
	}
}

country_event = {
	id = system.5
	hidden=yes

	trigger = {
		original_tag = PAL
		country_exists = HAM
		has_government = islamist
	}

	fire_only_once = yes
	
	immediate = {
		annex_country = { target = HAM transfer_troops = yes }
	}
}

country_event = {
	id = system.6
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = shanghai_cooperation_organization_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = shanghai_cooperation_organization_dissolved
	}
}

country_event = {
	id = system.7
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = asean_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = asean_dissolved
	}
}

country_event = {
	id = system.8
	hidden=yes

	trigger = {
		NOT = { 
			country_exists = ISS
			has_global_flag = isis_defeated
		}
	}

	fire_only_once = yes
	
	immediate = {
		news_event = isis.1
		set_global_flag = isis_defeated
		every_state = {
			limit = {
				OR = {
					is_core_of = ISS
					is_claimed_by = ISS
				}
			}
			remove_core_of = ISS
			remove_claim_by = ISS
		}
	}
}

country_event = {
	id = system.9
	hidden=yes

	trigger = {
		NOT = { has_global_flag = syrian_civil_war_over }
		country_exists = SYR
		NOT = { country_exists = FSA }
		NOT = { country_exists = ISS }
	}

	fire_only_once = yes
	
	immediate = {
		country_event = syria.1
		set_global_flag = syrian_civil_war_over
	}
}

country_event = {
	id = system.10
	hidden=yes

	trigger = {
		NOT = { has_global_flag = syrian_civil_war_over }
		OR = {
			AND = {
				country_exists = FSA
				NOT = { country_exists = SYR }
				NOT = { country_exists = ISS }
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		country_event = syria.2
		set_global_flag = syrian_civil_war_over
		FSA = {
			remove_ideas = idea_violent_non_state_actor
			set_cosmetic_tag = FSA_GOV 
		}
	}
}

country_event = {
	id = system.11
	hidden=yes

	trigger = {
		NOT = { has_global_flag = syrian_civil_war_over }
		country_exists = ISS
		NOT = { country_exists = FSA }
		NOT = { country_exists = SYR }
	}

	fire_only_once = yes
	
	immediate = {
		news_event = syria.3
		set_global_flag = syrian_civil_war_over
	}
}

#country_event = {
#	id = system.12
#	hidden=yes
#
#	trigger = {
#		has_variable = loan_days_left
#		check_variable = {
#			loan_days_left < 1
#		}
#	}
#	
#	immediate = {
#		var:originated_country = {
#			country_event = money.7
#		}
#	}
#}

country_event = {
	id = system.14
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = non_aligned_movement_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = non_aligned_movement_dissolved
	}
}

country_event = {
	id = system.15
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = baltic_assembly_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = baltic_assembly_dissolved
	}
}

country_event = {
	id = system.16
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = east_african_community_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = east_african_community_dissolved
	}
}

country_event = {
	id = system.17
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = guam_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = guam_dissolved
	}
}

country_event = {
	id = system.18
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = commonwealth_of_independent_states_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = commonwealth_of_independent_states_dissolved
	}
}

country_event = {
	id = system.19
	hidden=yes

	trigger = {
		NOT = { 
			any_country = {
				has_idea = gulf_cooperation_council_member
			}
		}
	}

	fire_only_once = yes
	
	immediate = {
		set_global_flag = gulf_cooperation_council_dissolved
	}
}

country_event = {
	id = system.20
	hidden=yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { has_country_flag = islamist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = islamist_independent
					}
				}
			}
			set_party_name = { 
				ideology = islamist
				long_name = "Islamist Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = fascist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = fascist_independent
					}
				}
			}
			set_party_name = { 
				ideology = fascist
				long_name = "Fascist Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = right_wing_nationalist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = right_wing_nationalist_independent
					}
				}
			}
			set_party_name = { 
				ideology = right_wing_nationalist
				long_name = "Right-Wing Nationalist Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = monarchist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = monarchist_independent
					}
				}
			}
			set_party_name = { 
				ideology = monarchist
				long_name = "Monarchist Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = national_conservative_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = national_conservative_independent
					}
				}
			}
			set_party_name = { 
				ideology = national_conservative
				long_name = "National Conservative Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = conservative_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = conservative_independent
					}
				}
			}
			set_party_name = { 
				ideology = conservative
				long_name = "Conservative Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = classical_liberal_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = classical_liberal_independent
					}
				}
			}
			set_party_name = { 
				ideology = classical_liberal
				long_name = "Classical Liberal Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = social_liberal_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = social_liberal_independent
					}
				}
			}
			set_party_name = { 
				ideology = social_liberal
				long_name = "Social Liberal Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = social_democrat_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = social_democrat_independent
					}
				}
			}
			set_party_name = { 
				ideology = social_democrat
				long_name = "Social Democrat Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = progressive_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = progressive_independent
					}
				}
			}
			set_party_name = { 
				ideology = progressive
				long_name = "Progressive Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = socialist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = socialist_independent
					}
				}
			}
			set_party_name = { 
				ideology = socialist
				long_name = "Socialist Independents"
				name = "Ind."
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = communist_intended_no_leader }
				ROOT = {
					any_character = {
						has_ideology = communist_independent
					}
				}
			}
			set_party_name = { 
				ideology = communist
				long_name = "Communist Independents"
				name = "Ind."
			}
		}
	}
}

country_event = {
	id = system.21
	hidden=yes

	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_stability > 0.5
			}
			if = {
				limit = {
					has_country_flag = coalition_islamist
				}
				add_popularity = { 
					ideology = islamist
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_fascist
				}
				add_popularity = { 
					ideology = fascist
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_right_wing_nationalist
				}
				add_popularity = { 
					ideology = right_wing_nationalist
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_monarchist
				}
				add_popularity = { 
					ideology = monarchist
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_national_conservative
				}
				add_popularity = { 
					ideology = national_conservative
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_conservative
				}
				add_popularity = { 
					ideology = conservative
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_classical_liberal
				}
				add_popularity = { 
					ideology = classical_liberal
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_social_liberal
				}
				add_popularity = { 
					ideology = social_liberal
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_social_democrat
				}
				add_popularity = { 
					ideology = social_democrat
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_progressive
				}
				add_popularity = { 
					ideology = progressive
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_socialist
				}
				add_popularity = { 
					ideology = socialist
					popularity = 0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_communist
				}
				add_popularity = { 
					ideology = communist
					popularity = 0.01 
				}
			}
		}
		if = {
			limit = {
				has_stability < 0.5
			}
			if = {
				limit = {
					has_country_flag = coalition_islamist
				}
				add_popularity = { 
					ideology = islamist
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_fascist
				}
				add_popularity = { 
					ideology = fascist
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_right_wing_nationalist
				}
				add_popularity = { 
					ideology = right_wing_nationalist
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_monarchist
				}
				add_popularity = { 
					ideology = monarchist
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_national_conservative
				}
				add_popularity = { 
					ideology = national_conservative
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_conservative
				}
				add_popularity = { 
					ideology = conservative
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_classical_liberal
				}
				add_popularity = { 
					ideology = classical_liberal
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_social_liberal
				}
				add_popularity = { 
					ideology = social_liberal
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_social_democrat
				}
				add_popularity = { 
					ideology = social_democrat
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_progressive
				}
				add_popularity = { 
					ideology = progressive
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_socialist
				}
				add_popularity = { 
					ideology = socialist
					popularity = -0.01 
				}
			}
			if = {
				limit = {
					has_country_flag = coalition_communist
				}
				add_popularity = { 
					ideology = communist
					popularity = -0.01 
				}
			}
		}
	}
}

country_event = {
	id = system.22
	hidden=yes

	trigger = {
		NOT = { has_global_flag = south_sudanese_civil_war_over }
		country_exists = SSD
		NOT = { country_exists = SPO }
	}

	fire_only_once = yes
	
	immediate = {
		news_event = south_sudan.1
		set_global_flag = south_sudanese_civil_war_over
		every_state = {
			limit = {
				OR = {
					is_core_of = SPO
					is_claimed_by = SPO
				}
			}
			remove_core_of = SPO
			remove_claim_by = SPO
		}
	}
}

country_event = {
	id = system.22
	hidden=yes

	trigger = {
		NOT = { has_global_flag = south_sudanese_civil_war_over }
		country_exists = SPO
		NOT = { country_exists = SSD }
	}

	fire_only_once = yes
	
	immediate = {
		news_event = south_sudan.2
		set_global_flag = south_sudanese_civil_war_over
		SPO = {
			add_ideas = one_party_state
			set_cosmetic_tag = SSD
			set_capital = { state = 762 }
		}
		every_state = {
			limit = {
				OR = {
					is_core_of = SSD
					is_claimed_by = SSD
				}
			}
			remove_core_of = SSD
			remove_claim_by = SSD
		}
	}
}