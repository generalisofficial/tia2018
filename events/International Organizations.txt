add_namespace = international_organizations

# (Country) has applied to join the (Organization)
country_event = {
	id = international_organizations.1
	title = international_organizations.1.t
	desc = international_organizations.1.d
	
	is_triggered_only = yes
	
	option = {
		name = international_organizations.1.o1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				has_opinion = {
					target = FROM
					value > 0
				}
			}
		}
		add_to_variable = {
			var = global.generic_application_vote_count_in_favor
			value = 1
		}
	}

	option = {
		name = international_organizations.1.o2
		ai_chance = {
			factor = 0
			modifier = {
				factor = 1
				has_opinion = {
					target = FROM
					value < 0
				}
			}
		}
		add_to_variable = {
			var = global.generic_application_vote_count_against
			value = 1
		}
	}
}

# Response from the (Organization)
country_event = {
	id = international_organizations.2
	title = international_organizations.2.t
	desc = international_organizations.2.d
	
	is_triggered_only = yes
	
	option = {
		name = international_organizations.2.o1
		trigger = {
			check_variable = {
				var = global.generic_application_vote_count_in_favor
				value = global.generic_application_vote_count_against
				compare = greater_than
			}
		}
		if = {
			limit = {
				has_global_flag = ongoing_AU_application # African Union
			}
			add_ideas = idea_african_union_member
			clr_global_flag = ongoing_AU_application
			hidden_effect = {
				every_country = {
					limit = {
						has_idea = idea_african_union_member
					}
					add_opinion_modifier = { target = ROOT modifier = african_union_member }
					add_opinion_modifier = { target = ROOT modifier = african_union_member_trade }
					ROOT = {
						add_opinion_modifier = { target = PREV modifier = african_union_member }
						add_opinion_modifier = { target = PREV modifier = african_union_member_trade }
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = ongoing_CoN_application # Commonwealth of Nations
			}
			add_ideas = idea_commonwealth_of_nations_member
			clr_global_flag = ongoing_CoN_application
			hidden_effect = {
				every_country = {
					limit = {
						has_idea = idea_commonwealth_of_nations_member
					}
					add_opinion_modifier = { target = ROOT modifier = commonwealth_of_nations_member }
					ROOT = {
						add_opinion_modifier = { target = PREV modifier = commonwealth_of_nations_member }
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = ongoing_BA_application # Baltic Assembly
			}
			add_ideas = idea_baltic_assembly_member
			clr_global_flag = ongoing_BA_application
			hidden_effect = {
				every_country = {
					limit = {
						has_idea = idea_baltic_assembly_member
					}
					add_opinion_modifier = { target = ROOT modifier = baltic_assembly_member }
					ROOT = {
						add_opinion_modifier = { target = PREV modifier = baltic_assembly_member }
					}
				}
			}
		}
		clr_global_flag = ongoing_generic_application
		clear_variable = global.generic_application_vote_count_in_favor
		clear_variable = global.generic_application_vote_count_against
	}

	option = {
		name = international_organizations.2.o2
		trigger = {
			NOT = {
				check_variable = {
					var = global.generic_application_vote_count_in_favor
					value = global.generic_application_vote_count_against
					compare = greater_than
				}
			}
		}
		clr_global_flag = ongoing_generic_application
		clear_variable = global.generic_application_vote_count_in_favor
		clear_variable = global.generic_application_vote_count_against
	}
}