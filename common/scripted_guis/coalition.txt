scripted_gui = {
	coalition_topbar = {
		window_name = "coalition_topbar_container"
 
		context_type = player_context
 
		visible = {
            has_country_flag = has_parliament
			is_ai = no
		}
	}

	coalition_government_formation = {
		window_name = "coalition_government_formation_container"
 
		context_type = player_context
 
		visible = {
			has_country_flag = forming_government
			is_ai = no
		}
 
        effects = {
			select_leader_click = {
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 1 }
					}
					set_country_flag = government_communist
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = communist_seats }
					add_to_variable = { Root.NewCoalition = communist_seats }
					if = {
						limit = {
							has_country_flag = coalition_communist
						}
						subtract_from_variable = { Root.NewCoalitionPartner = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 2 }
					}
					set_country_flag = government_socialist
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = socialist_seats }
					add_to_variable = { Root.NewCoalition = socialist_seats }
					if = {
						limit = {
							has_country_flag = coalition_socialist
						}
						subtract_from_variable = { Root.NewCoalitionPartner = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 3 }
					}
					set_country_flag = government_social_democrat
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = social_democrat_seats }
					add_to_variable = { Root.NewCoalition = social_democrat_seats }
					if = {
						limit = {
							has_country_flag = coalition_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionPartner = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 4 }
					}
					set_country_flag = government_progressive
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = progressive_seats }
					add_to_variable = { Root.NewCoalition = progressive_seats }
					if = {
						limit = {
							has_country_flag = coalition_progressive
						}
						subtract_from_variable = { Root.NewCoalitionPartner = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 5 }
					}
					set_country_flag = government_social_liberal
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = social_liberal_seats }
					add_to_variable = { Root.NewCoalition = social_liberal_seats }
					if = {
						limit = {
							has_country_flag = coalition_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionPartner = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 6 }
					}
					set_country_flag = government_classical_liberal
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
					add_to_variable = { Root.NewCoalition = classical_liberal_seats }
					if = {
						limit = {
							has_country_flag = coalition_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionPartner = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 7 }
					}
					set_country_flag = government_conservative
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = conservative_seats }
					add_to_variable = { Root.NewCoalition = conservative_seats }
					if = {
						limit = {
							has_country_flag = coalition_conservative
						}
						subtract_from_variable = { Root.NewCoalitionPartner = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 8 }
					}
					set_country_flag = government_national_conservative
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = national_conservative_seats }
					add_to_variable = { Root.NewCoalition = national_conservative_seats }
					if = {
						limit = {
							has_country_flag = coalition_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionPartner = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 9 }
					}
					set_country_flag = government_right_wing_populist
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
					add_to_variable = { Root.NewCoalition = right_wing_populist_seats }
					if = {
						limit = {
							has_country_flag = coalition_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionPartner = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_fascist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 10 }
					}
					set_country_flag = government_fascist
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = fascist_seats }
					add_to_variable = { Root.NewCoalition = fascist_seats }
					if = {
						limit = {
							has_country_flag = coalition_fascist
						}
						subtract_from_variable = { Root.NewCoalitionPartner = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_islamist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					clr_country_flag = government_islamist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 11 }
					}
					set_country_flag = government_islamist
					set_country_flag = government_chosen
					add_to_variable = { Root.NewCoalitionLeader = islamist_seats }
					add_to_variable = { Root.NewCoalition = islamist_seats }
					if = {
						limit = {
							has_country_flag = coalition_islamist
						}
						subtract_from_variable = { Root.NewCoalitionPartner = islamist_seats }
						subtract_from_variable = { Root.NewCoalition = islamist_seats }
						clr_country_flag = coalition_islamist
					}
					if = {
						limit = {
							has_country_flag = government_communist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = communist_seats }
						subtract_from_variable = { Root.NewCoalition = communist_seats }
						clr_country_flag = coalition_communist 
					}
					if = {
						limit = {
							has_country_flag = government_socialist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = socialist_seats }
						subtract_from_variable = { Root.NewCoalition = socialist_seats }
						clr_country_flag = coalition_socialist
					}
					if = {
						limit = {
							has_country_flag = government_social_democrat
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_democrat_seats }
						subtract_from_variable = { Root.NewCoalition = social_democrat_seats }
						clr_country_flag = coalition_social_democrat
					}
					if = {
						limit = {
							has_country_flag = government_progressive
						}
						subtract_from_variable = { Root.NewCoalitionLeader = progressive_seats }
						subtract_from_variable = { Root.NewCoalition = progressive_seats }
						clr_country_flag = coalition_progressive
					}
					if = {
						limit = {
							has_country_flag = government_social_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = social_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = social_liberal_seats }
						clr_country_flag = coalition_social_liberal
					}
					if = {
						limit = {
							has_country_flag = government_classical_liberal
						}
						subtract_from_variable = { Root.NewCoalitionLeader = classical_liberal_seats }
						subtract_from_variable = { Root.NewCoalition = classical_liberal_seats }
						clr_country_flag = coalition_classical_liberal
					}
					if = {
						limit = {
							has_country_flag = government_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = conservative_seats }
						subtract_from_variable = { Root.NewCoalition = conservative_seats }
						clr_country_flag = coalition_conservative
					}
					if = {
						limit = {
							has_country_flag = government_national_conservative
						}
						subtract_from_variable = { Root.NewCoalitionLeader = national_conservative_seats }
						subtract_from_variable = { Root.NewCoalition = national_conservative_seats }
						clr_country_flag = coalition_national_conservative
					}
					if = {
						limit = {
							has_country_flag = government_right_wing_populist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = right_wing_populist_seats }
						subtract_from_variable = { Root.NewCoalition = right_wing_populist_seats }
						clr_country_flag = coalition_right_wing_populist
					}
					if = {
						limit = {
							has_country_flag = government_fascist
						}
						subtract_from_variable = { Root.NewCoalitionLeader = fascist_seats }
						subtract_from_variable = { Root.NewCoalition = fascist_seats }
						clr_country_flag = coalition_fascist
					}
					clr_country_flag = government_fascist
					clr_country_flag = government_right_wing_populist
					clr_country_flag = government_national_conservative
					clr_country_flag = government_conservative
					clr_country_flag = government_classical_liberal
					clr_country_flag = government_social_liberal
					clr_country_flag = government_social_democrat
					clr_country_flag = government_progressive
					clr_country_flag = government_socialist
					clr_country_flag = government_communist
				}
				update_coalition_majority_gfx = yes
			}
			select_partner_click = {
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 1 }
					}
					if = {
						limit = {
							has_country_flag = coalition_communist
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = communist_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_communist
						subtract_from_variable = { ROOT.NewCoalitionPartner = communist_seats }
						subtract_from_variable = { ROOT.NewCoalition = communist_seats }
					}
					else = {
						set_country_flag = coalition_communist
						add_to_variable = { ROOT.NewCoalitionPartner = communist_seats }
						add_to_variable = { ROOT.NewCoalition = communist_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 2 }
					}
					if = {
						limit = {
							has_country_flag = coalition_socialist
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = socialist_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_socialist
						subtract_from_variable = { ROOT.NewCoalitionPartner = socialist_seats }
						subtract_from_variable = { ROOT.NewCoalition = socialist_seats }
					}
					else = {
						set_country_flag = coalition_socialist
						add_to_variable = { ROOT.NewCoalitionPartner = socialist_seats }
						add_to_variable = { ROOT.NewCoalition = socialist_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 3 }
					}
					if = {
						limit = {
							has_country_flag = coalition_social_democrat
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = social_democrat_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_social_democrat
						subtract_from_variable = { ROOT.NewCoalitionPartner = social_democrat_seats }
						subtract_from_variable = { ROOT.NewCoalition = social_democrat_seats }
					}
					else = {
						set_country_flag = coalition_social_democrat
						add_to_variable = { ROOT.NewCoalitionPartner = social_democrat_seats }
						add_to_variable = { ROOT.NewCoalition = social_democrat_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 4 }
					}
					if = {
						limit = {
							has_country_flag = coalition_progressive
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = progressive_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_progressive
						subtract_from_variable = { ROOT.NewCoalitionPartner = progressive_seats }
						subtract_from_variable = { ROOT.NewCoalition = progressive_seats }
					}
					else = {
						set_country_flag = coalition_progressive
						add_to_variable = { ROOT.NewCoalitionPartner = progressive_seats }
						add_to_variable = { ROOT.NewCoalition = progressive_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 5 }
					}
					if = {
						limit = {
							has_country_flag = coalition_social_liberal
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = social_liberal_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_social_liberal
						subtract_from_variable = { ROOT.NewCoalitionPartner = social_liberal_seats }
						subtract_from_variable = { ROOT.NewCoalition = social_liberal_seats }
					}
					else = {
						set_country_flag = coalition_social_liberal
						add_to_variable = { ROOT.NewCoalitionPartner = social_liberal_seats }
						add_to_variable = { ROOT.NewCoalition = social_liberal_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 6 }
					}
					if = {
						limit = {
							has_country_flag = coalition_classical_liberal
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = classical_liberal_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_classical_liberal
						subtract_from_variable = { ROOT.NewCoalitionPartner = classical_liberal_seats }
						subtract_from_variable = { ROOT.NewCoalition = classical_liberal_seats }
					}
					else = {
						set_country_flag = coalition_classical_liberal
						add_to_variable = { ROOT.NewCoalitionPartner = classical_liberal_seats }
						add_to_variable = { ROOT.NewCoalition = classical_liberal_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 7 }
					}
					if = {
						limit = {
							has_country_flag = coalition_conservative
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = conservative_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_conservative
						subtract_from_variable = { ROOT.NewCoalitionPartner = conservative_seats }
						subtract_from_variable = { ROOT.NewCoalition = conservative_seats }
					}
					else = {
						set_country_flag = coalition_conservative
						add_to_variable = { ROOT.NewCoalitionPartner = conservative_seats }
						add_to_variable = { ROOT.NewCoalition = conservative_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 8 }
					}
					if = {
						limit = {
							has_country_flag = coalition_national_conservative
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = national_conservative_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_national_conservative
						subtract_from_variable = { ROOT.NewCoalitionPartner = national_conservative_seats }
						subtract_from_variable = { ROOT.NewCoalition = national_conservative_seats }
					}
					else = {
						set_country_flag = coalition_national_conservative
						add_to_variable = { ROOT.NewCoalitionPartner = national_conservative_seats }
						add_to_variable = { ROOT.NewCoalition = national_conservative_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 9 }
					}
					if = {
						limit = {
							has_country_flag = coalition_right_wing_populist
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = right_wing_populist_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_right_wing_populist
						subtract_from_variable = { ROOT.NewCoalitionPartner = right_wing_populist_seats }
						subtract_from_variable = { ROOT.NewCoalition = right_wing_populist_seats }
					}
					else = {
						set_country_flag = coalition_right_wing_populist
						add_to_variable = { ROOT.NewCoalitionPartner = right_wing_populist_seats }
						add_to_variable = { ROOT.NewCoalition = right_wing_populist_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 10 }
					}
					if = {
						limit = {
							has_country_flag = coalition_fascist
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = fascist_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_fascist
						subtract_from_variable = { ROOT.NewCoalitionPartner = fascist_seats }
						subtract_from_variable = { ROOT.NewCoalition = fascist_seats }
					}
					else = {
						set_country_flag = coalition_fascist
						add_to_variable = { ROOT.NewCoalitionPartner = fascist_seats }
						add_to_variable = { ROOT.NewCoalition = fascist_seats }
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 11 }
					}
					if = {
						limit = {
							has_country_flag = coalition_islamist
							check_variable = {
								var = ROOT.NewCoalitionPartner
								value = islamist_seats
								compare = greater_than_or_equals
							}
						}
						clr_country_flag = coalition_islamist
						subtract_from_variable = { ROOT.NewCoalitionPartner = islamist_seats }
						subtract_from_variable = { ROOT.NewCoalition = islamist_seats }
					}
					else = {
						set_country_flag = coalition_islamist
						add_to_variable = { ROOT.NewCoalitionPartner = islamist_seats }
						add_to_variable = { ROOT.NewCoalition = islamist_seats }
					}
				}
				update_coalition_majority_gfx = yes
			}
			finish_click = {
				clr_country_flag = forming_government
				if = {
					limit = {
						NOT = { coalition_partners_are_neighbors = yes }
					}
					add_ideas = unstable_coalition
				}
				if = {
					limit = {
						has_country_flag = government_islamist
					}
					set_politics = {						
						ruling_party = islamist
						elections_allowed = yes
					}
				}
				else_if = {
					limit = {
						has_country_flag = government_fascist
					}
					set_politics = {						
						ruling_party = fascist
						elections_allowed = yes
					}
					set_country_flag = coalition_fascist
				}
				else_if = {
					limit = {
						has_country_flag = government_right_wing_populist
					}
					set_politics = {						
						ruling_party = right_wing_populist
						elections_allowed = yes
					}
					set_country_flag = coalition_right_wing_populist
				}
				else_if = {
					limit = {
						has_country_flag = government_monarchist
					}
					set_politics = {						
						ruling_party = monarchist
						elections_allowed = yes
					}
					set_country_flag = coalition_monarchist
				}
				else_if = {
					limit = {
						has_country_flag = government_national_conservative
					}
					set_politics = {						
						ruling_party = national_conservative
						elections_allowed = yes
					}
					set_country_flag = coalition_national_conservative
				}
				else_if = {
					limit = {
						has_country_flag = government_conservative
					}
					set_politics = {						
						ruling_party = conservative
						elections_allowed = yes
					}
					set_country_flag = coalition_conservative
				}
				else_if = {
					limit = {
						has_country_flag = government_classical_liberal
					}
					set_politics = {						
						ruling_party = classical_liberal
						elections_allowed = yes
					}
					set_country_flag = coalition_classical_liberal
				}
				else_if = {
					limit = {
						has_country_flag = government_social_liberal
					}
					set_politics = {						
						ruling_party = social_liberal
						elections_allowed = yes
					}
					set_country_flag = coalition_social_liberal
				}
				else_if = {
					limit = {
						has_country_flag = government_social_democrat
					}
					set_politics = {
						ruling_party = social_democrat
						elections_allowed = yes
					}
					set_country_flag = coalition_social_democrat
				}
				else_if = {
					limit = {
						has_country_flag = government_progressive
					}
					set_politics = {						
						ruling_party = progressive
						elections_allowed = yes
					}
					set_country_flag = coalition_progressive
				}
				else_if = {
					limit = {
						has_country_flag = government_socialist
					}
					set_politics = {						
						ruling_party = socialist
						elections_allowed = yes
					}
					set_country_flag = coalition_socialist
				}
				else_if = {
					limit = {
						has_country_flag = government_communist
					}
					set_politics = {						
						ruling_party = communist
						elections_allowed = yes
					}
					set_country_flag = coalition_communist
				}
				set_country_flag = has_parliament
				set_variable = { ROOT.NewCoalition = ROOT.Coalition }
				cleanup_coalition = yes
				update_coalition = yes
				set_parliament_graphics = yes
				hidden_effect = {
					post_election_effects = yes
				}
			}
        }
        
		triggers = {
			select_leader_visible = {
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 1 }
					}
					NOT = {
						has_country_flag = government_communist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 2 }
					}
					NOT = {
						has_country_flag = government_socialist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 3 }
					}
					NOT = {
						has_country_flag = government_social_democrat
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 4 }
					}
					NOT = {
						has_country_flag = government_progressive
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 5 }
					}
					NOT = {
						has_country_flag = government_social_liberal
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 6 }
					}
					NOT = {
						has_country_flag = government_classical_liberal
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 7 }
					}
					NOT = {
						has_country_flag = government_conservative
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 8 }
					}
					NOT = {
						has_country_flag = government_national_conservative
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 9 }
					}
					NOT = {
						has_country_flag = government_right_wing_populist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 10 }
					}
					NOT = {
						has_country_flag = government_fascist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 11 }
					}
					NOT = {
						has_country_flag = government_islamist
					}
				}
			}
			select_partner_click_enabled = {
				has_country_flag = government_chosen
			}
			select_partner_visible = {
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 1 }
					}
					NOT = {
						has_country_flag = government_communist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 2 }
					}
					NOT = {
						has_country_flag = government_socialist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 3 }
					}
					NOT = {
						has_country_flag = government_social_democrat
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 4 }
					}
					NOT = {
						has_country_flag = government_progressive
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 5 }
					}
					NOT = {
						has_country_flag = government_social_liberal
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 6 }
					}
					NOT = {
						has_country_flag = government_classical_liberal
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 7 }
					}
					NOT = {
						has_country_flag = government_conservative
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 8 }
					}
					NOT = {
						has_country_flag = government_national_conservative
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 9 }
					}
					NOT = {
						has_country_flag = government_right_wing_populist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 10 }
					}
					NOT = {
						has_country_flag = government_fascist
					}
				}
				if = {
					limit = {
						check_variable = { Root.coalition_leaders_array^i = 11 }
					}
					NOT = {
						has_country_flag = government_islamist
					}
				}
			}
			minority_government_icon_visible = {
				check_variable = { Root.NewCoalition < 49.99 }
			}
			unstable_coalition_icon_visible = {
				NOT = { coalition_partners_are_neighbors = yes }
			}
			recommended_icon_visible = {
				coalition_partners_are_neighbors_grid_entry = yes
			}
			finish_click_enabled = {
				has_country_flag = government_chosen
				has_at_least_one_government_and_one_coalition_flag = yes
			}
        }
		properties = {
			groups_bar_bg = {
				x = ROOT.MajorityGFX
			}
		}
		dynamic_lists = {
            coalition_leaders_grid = {
                array = coalition_leaders_array
                entry_container = coalition_leaders_grid_entry
                change_scope = no
            }
			coalition_partners_grid = {
                array = coalition_partners_array
                entry_container = coalition_partners_grid_entry
                change_scope = no
            }
        }
	}
}