foreign_affairs = {

	switch_recognition_to_PRC = {
		visible = {
			NOT = {
				OR = {
					original_tag = CHI
					original_tag = PRC
				}
			}
			country_exists = PRC
			country_exists = CHI
			NOT = { has_global_flag = taiwan_independence }
			is_sovereign_state = yes
			has_country_flag = recognizes_the_roc
		}

		available = {
			NOT = { is_subject_of = PRC }
		}

		complete_effect = {
			clr_country_flag = recognizes_the_roc
			CHI = {
				remove_opinion_modifier = { target = ROOT modifier = recognizes_the_roc }
			}
			PRC = {
				remove_opinion_modifier = { target = ROOT modifier = recognizes_the_roc_PRC }
			}
		}
		
		icon = communist_china
		
		cost = 75
		
		ai_will_do = {
			base = 0
			modifier = {
				factor = 100
				has_war_with = CHI
			}
			modifier = {
				factor = 1
				NOT = { has_war_with = CHI }
				OR = {
					has_government = communist
					has_government = socialist
					has_country_leader_with_trait = friend_of_china
				}
			}
		}
	}

	switch_recognition_to_CHI = {
		visible = {
			NOT = {
				OR = {
					original_tag = CHI
					original_tag = PRC
				}
			}
			country_exists = PRC
			country_exists = CHI
			NOT = { has_global_flag = taiwan_independence }
			is_sovereign_state = yes
			NOT = { has_country_flag = recognizes_the_roc }
		}

		available = {
			NOT = { is_subject_of = PRC }
		}

		complete_effect = {
			set_country_flag = recognizes_the_roc
			CHI = {
				add_opinion_modifier = { target = ROOT modifier = recognizes_the_roc }
			}
			PRC = {
				add_opinion_modifier = { target = ROOT modifier = recognizes_the_roc_PRC }
			}
		}
		
		icon = republic_of_china
		
		cost = 75
		
		ai_will_do = {
			base = 0
			modifier = {
				factor = 100
				has_war_with = PRC
			}
			modifier = {
				factor = 1
				threat > 0.5
				NOT = { has_war_with = PRC }
				has_country_leader_with_trait = enemy_of_china
			}
		}
	}

	declare_neutrality = {
		visible = {
			is_subject = no
			NOT = { 
				has_idea = idea_neutral_foreign_policy
				has_idea = violent_non_state_actor
			}
		}

		available = {
			is_in_faction = no
			has_war = no
		}

		complete_effect = {
			add_ideas = idea_neutral_foreign_policy
		}
		
		icon = neutrality
		
		cost = 50
		
		ai_will_do = {
			base = 0
			modifier = {
				factor = 100
				has_idea = no_standing_army
			}
		}
	}
	
	abandon_neutrality = {
		visible = {
			has_idea = idea_neutral_foreign_policy
		}

		complete_effect = {
			remove_ideas = idea_neutral_foreign_policy
		}
		
		icon = neutrality
		
		cost = 50
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 100
				has_government = fascist
				NOT = { has_idea = no_standing_army }
			}
		}
	}

	propose_a_peace_summit_with_eritrea = {
	
		visible = {
			original_tag = ETH
			country_exists = ERI
			owns_state = 950
		}
		
		available = {
			NOT = { has_war_with = ERI has_border_war_with = ERI }
		}
		
		complete_effect = {
            ERI = {
				country_event = ethiopia.3
				custom_effect_tooltip = needs_approval
			}
			effect_tooltip = {
			    remove_opinion_modifier = { target = ERI modifier = frozen_conflict }
		        ERI = { remove_opinion_modifier = { target = ETH modifier = frozen_conflict } transfer_state = 950 }
				950 = { remove_core_of = ETH }
            }
		}
		
		icon = democracy

		fire_only_once = yes
		
		cost = 25
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 200
				date > 2018.7.7
			}
		}
	}

	the_kingdom_of_eswatini = {
	
		visible = {
			original_tag = SWZ
			has_government = monarchist
		}
		
		available = {
			has_government = monarchist
		}
		
		complete_effect = {
			set_cosmetic_tag = SWZ_2018
			news_event = swaziland.1
		}
		
		icon = swaziland

		fire_only_once = yes
		
		cost = 25
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 100
				date > 2018.4.18
			}
		}
	}

	reform_the_soviet_union = {
		visible = {
		    OR = {
			    original_tag = SOV
				original_tag = UKR
				original_tag = BLR
				original_tag = MOL
				original_tag = TRA
				original_tag = LAT
				original_tag = LIT
				original_tag = EST
				original_tag = GEO
				original_tag = ARM
				original_tag = AZR
				original_tag = NGK
				original_tag = ABK
				original_tag = SOS
				original_tag = KAZ
				original_tag = UZB
				original_tag = TMS
				original_tag = TAJ
				original_tag = KYR
				original_tag = CHE
				original_tag = DAG
			}
		}
		
		available = {
		    has_government = communist
			owns_state = 219
			owns_state = 202
			owns_state = 206
		}
		
		icon = soviet_union
		
		cost = 100
		fire_only_once = yes
		
		complete_effect = {
			set_country_flag = is_formable_nation
			news_event = formable_nations.1
			set_cosmetic_tag = USSR
			set_party_name = {
				ideology = communist
				long_name = SOV_communist_party_KPSS_long
				name = SOV_communist_party_KPSS
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SOV
						is_core_of = UKR
						is_core_of = BLR
						is_core_of = MOL
						is_core_of = TRA
						is_core_of = LAT
						is_core_of = LIT
						is_core_of = EST
						is_core_of = GEO
						is_core_of = ARM
						is_core_of = AZR
						is_core_of = NGK
						is_core_of = ABK
						is_core_of = SOS
						is_core_of = KAZ
						is_core_of = UZB
						is_core_of = TMS
						is_core_of = TAJ
						is_core_of = KYR
					}
				}
				add_core_of = ROOT
			}
		}
		
		ai_will_do = {
			factor = 100
		}
	}

	send_ultimatum_to_rojava = {
	
		visible = {
			OR = {
				original_tag = SYR
				original_tag = FSA
			}
			country_exists = ROJ
			has_global_flag = syrian_civil_war_over
		}
		
		available = {
			NOT = {
				ROJ = {
					is_guaranteed_by = USA
				}
			}
		}
		
		complete_effect = {
			ROJ = {
				country_event = syria.3
			}
		}
		
		icon = rojava

		fire_only_once = yes
		
		cost = 50
		
		ai_will_do = {
			factor = 1
		}
	}

	reform_yugoslavia = {
		visible = {
		    OR = {
			    original_tag = SER
				original_tag = CRO
				original_tag = KOS
				original_tag = BOS
				original_tag = SLV
				original_tag = MAC
				original_tag = MNT
			}
		}
		
		available = {
			owns_state = 45
			owns_state = 107
			owns_state = 108
			owns_state = 927
			owns_state = 785
			owns_state = 1012
			owns_state = 1013
			owns_state = 106
			owns_state = 1014
			owns_state = 105
			owns_state = 104
			owns_state = 848
			owns_state = 103
			owns_state = 109
			owns_state = 736
			owns_state = 163
			owns_state = 102
		}
		
		icon = yugoslavia
		
		cost = 100
		fire_only_once = yes
		
		complete_effect = {
			set_country_flag = is_formable_nation
			set_cosmetic_tag = YUG
			every_state = {
			    limit = {
				    OR = {
				        is_core_of = SER
				        is_core_of = CRO
						is_core_of = KOS
						is_core_of = BOS
						is_core_of = SLV
						is_core_of = MAC
						is_core_of = MNT
				    }
			    }
			    add_core_of = ROOT
		    }
			
		}
		
		ai_will_do = {
			factor = 100
		}
	}

	propose_a_solution_to_the_macedonian_naming_dispute = {
	
		visible = {
			original_tag = MAC
			country_exists = GRE
		}
		
		available = {
			NOT = { has_war_with = GRE }
		}
		
		complete_effect = {
            GRE = {
				country_event = macedonia.1
			}
		}
		
		icon = macedonia

		fire_only_once = yes
		
		cost = 50
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_government = fascist
					has_government = right_wing_nationalist
					has_government = national_conservative
					has_government = conservative
				}
			}
			modifier = {
				factor = 100
				date > 2018.6.17
				has_country_leader = {
					name = "Zoran Zaev"
					ruling_only = yes
				}
			}
		}
	}

	declare_taiwanese_independence = {
	
		visible = {
			original_tag = CHI
			NOT = { has_cosmetic_tag = TAIWAN }
			country_exists = PRC
			owns_state = 524
		}
		
		available = {
			is_subject = no
		}
		
		complete_effect = {
			custom_effect_tooltip = TT_taiwan_independence
			news_event = china.3
			set_global_flag = taiwan_independence
			set_cosmetic_tag = TAIWAN
			every_state = {
				limit = {
					OR = {
						is_core_of = ROOT
						is_claimed_by = ROOT
					}
					NOT = {
						OR = {
							state = 524
							state = 976
							state = 1115
							state = 988
							state = 1114
							state = 876
							state = 599
						}
					}
				}
				remove_core_of = ROOT
				remove_claim_by = ROOT
			}
			hidden_effect = {
				every_country = {
					limit = {
						has_country_flag = recognizes_the_roc
					}
					clr_country_flag = recognizes_the_roc
					CHI = {
						remove_opinion_modifier = { target = PREV modifier = recognizes_the_roc }
					}
					PRC = {
						remove_opinion_modifier = { target = PREV modifier = recognizes_the_roc_PRC }
					}
				}
			}
            PRC = {
				country_event = china.1
			}
		}
		
		icon = taiwan

		fire_only_once = yes
		
		cost = 200
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 1
				OR = {
					has_government = social_liberal
					has_government = progressive
					has_government = socialist
				}
			}
		}
	}

	become_a_special_administrative_region = {
	
		allowed = {
			has_dlc = "Together for Victory"
		}

		visible = {
			original_tag = CHI
			NOT = { has_cosmetic_tag = TAIWAN }
			country_exists = PRC
			owns_state = 524
		}
		
		available = {
			is_subject = no
			NOT = { has_war_with = PRC }
			controls_state = 524
		}
		
		complete_effect = {
			news_event = china.4
			set_global_flag = taiwan_independence
			set_cosmetic_tag = TAIWAN
			every_state = {
				limit = {
					OR = {
						is_core_of = ROOT
						is_claimed_by = ROOT
					}
					NOT = {
						OR = {
							state = 524
							state = 976
							state = 1115
							state = 988
							state = 1114
							state = 876
							state = 599
						}
					}
				}
				remove_core_of = ROOT
				remove_claim_by = ROOT
			}
			hidden_effect = {
				every_country = {
					limit = {
						has_country_flag = recognizes_the_roc
					}
					clr_country_flag = recognizes_the_roc
					CHI = {
						remove_opinion_modifier = { target = PREV modifier = recognizes_the_roc }
					}
					PRC = {
						remove_opinion_modifier = { target = PREV modifier = recognizes_the_roc_PRC }
					}
				}
			}
			transfer_units_fraction= {
				target = PRC
				size = 1
				stockpile_ratio = 1
				army_ratio = 1
				navy_ratio = 1
				air_ratio = 1
			}
            PRC = {
				set_autonomy = {
					target = ROOT
					autonomous_state = autonomy_autonomous_region
				}
				country_event = china.2
			}
		}
		
		icon = communist_china

		fire_only_once = yes
		
		cost = 100
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 100
				has_government = communist
			}
		}
	}

	claim_greater_romania = {
	
		visible = {
			original_tag = ROM
		}
		
		available = {
			is_subject = no
		}
		
		complete_effect = {
			add_state_claim = 77
			add_state_claim = 1047
			add_state_claim = 80
			add_state_claim = 78
			add_state_claim = 1156
			add_named_threat = { 
				threat = 3 
				name =  threat_territorial_claims
			}		
		}
		
		icon = romania

		fire_only_once = yes
		
		cost = 100
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 5
				OR = {
					has_government = fascist
					has_government = monarchist
					threat > 0.75
				}
			}
		}
	}

	apply_for_union_with_romania = {
	
		visible = {
			original_tag = MOL
			country_exists = ROM
		}
		
		available = {
			is_subject = no
			NOT = { has_war_with = ROM }
		}
		
		complete_effect = {
			ROM = { country_event = moldova.1 }
		}
		
		icon = moldova

		fire_only_once = yes
		
		cost = 100
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 1
				has_opinion = {
					target = ROM
					value > 0
				}
			}
		}
	}

	claim_abrene = {
	
		visible = {
			original_tag = LAT
		}
		
		available = {
			is_subject = no
		}
		
		complete_effect = {
			add_state_claim = 1158
			add_named_threat = { 
				threat = 3 
				name =  threat_territorial_claims
			}		
		}
		
		icon = latvia

		fire_only_once = yes
		
		cost = 100
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 100
				has_war_with = SOV
			}
			modifier = {
				factor = 5
				OR = {
					has_government = fascist
					has_government = monarchist
					threat > 0.75
				}
			}
		}
	}

	purchase_greenland = {
	
		visible = {
			original_tag = USA
			has_country_leader = {
				name = "Donald Trump"
				ruling_only = yes
			}
			NOT = { owns_state = 101 }
			OR = {
				DEN = { owns_state = 101 }
				GRN = {
					AND = {
						is_subject_of = DEN
						has_autonomy_state = autonomy_autonomous_region
						owns_state = 101
					}
				}
			}
		}
		
		available = {
			is_subject = no
			NOT = { has_war_with = DEN }
		}
		
		complete_effect = {
			DEN = { country_event = usa.9 }
		}
		
		icon = greenland

		fire_only_once = yes
		
		cost = 50
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 50
				date > 2019.8.1
			}
		}
	}

	negotiate_with_the_zapatistas = {
	
		allowed = {
			has_dlc = "Together for Victory"
		}

		visible = {
		    original_tag = MEX
			country_exists = ZAP
			ZAP = { owns_state = 1179 controls_state = 1179 }
			NOT = { has_war_with = ZAP }
			ZAP = { is_subject = no }
		}
		
		available = {
			is_subject = no
			NOT = { 
				OR = {
					has_country_flag = coalition_fascist 
					has_country_flag = coalition_islamist
					has_country_flag = coalition_right_wing_nationalist
					has_country_flag = coalition_monarchist
				}
			}
		}
		
		complete_effect = {
			ZAP = { country_event = mexico.1 }
		}
		
		icon = red_star

		fire_only_once = yes
		
		cost = 75
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 1
				OR = {
					has_government = social_liberal
					has_government = social_democrat
					has_government = progressive
				}
			}
			modifier = {
				factor = 10
				OR = {
					has_government = socialist
					has_government = communist
				}
			}
		}
	}

	claim_northern_ireland = {
	
		visible = {
			original_tag = IRE
			NOT = { 
				119 = {
					is_core_of = ROOT
				}
			}
		}
		
		available = {
			is_subject = no
		}
		
		complete_effect = {
			add_state_core = 119
			add_named_threat = { 
				threat = 3 
				name =  threat_territorial_claims
			}		
		}
		
		icon = ireland

		fire_only_once = yes
		
		cost = 100
		
		ai_will_do = {
			factor = 0
			modifier = {
				factor = 100
				OR = {
					has_war_with = ENG
					has_war_with = NIR
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_government = fascist
					has_government = monarchist
					has_government = socialist
					has_government = communist
					threat > 0.75
				}
			}
		}
	}
}